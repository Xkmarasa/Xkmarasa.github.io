<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Test Casas Simple</title>
    <style>
        body { font-family: Arial, sans-serif; padding: 20px; background: #f5f5f5; }
        .property-card { background: white; margin: 10px 0; padding: 15px; border-radius: 5px; box-shadow: 0 2px 5px rgba(0,0,0,0.1); }
        .loading { text-align: center; color: #20B2AA; padding: 20px; }
        .error { text-align: center; color: #e74c3c; padding: 20px; }
    </style>
</head>
<body>
    <h1>üè† Test Casas Simple</h1>
    <div id="properties-container">
        <div class="loading">üîÑ Cargando propiedades...</div>
    </div>
    
    <script>
        // Funci√≥n para probar m√∫ltiples URLs
        async function tryFetch(url, options = {}) {
            try {
                const response = await fetch(url, options);
                if (response.ok) {
                    return response;
                }
                throw new Error(`HTTP ${response.status}`);
            } catch (error) {
                throw error;
            }
        }

        // Funci√≥n para cargar propiedades (id√©ntica a casasAdmin.html)
        async function loadProperties() {
            console.log('üöÄ loadProperties() iniciada');
            const urls = [
                'https://93.189.91.62:8443/data',
                'https://93.189.91.62/data',
                'http://93.189.91.62:8080/data'
            ];
            
            console.log('üîÑ Intentando cargar propiedades...');
            
            for (let i = 0; i < urls.length; i++) {
                const url = urls[i];
                console.log(`üîÑ Intento ${i + 1}/3: ${url}`);
                
                try {
                    const response = await tryFetch(url);
                    const properties = await response.json();
                    console.log('‚úÖ Propiedades cargadas:', properties.length, 'elementos');
                    
                    // Mostrar propiedades
                    const container = document.getElementById('properties-container');
                    container.innerHTML = '';
                    
                    properties.forEach((property, index) => {
                        const propertyCard = document.createElement('div');
                        propertyCard.className = 'property-card';
                        propertyCard.innerHTML = `
                            <h3>${property.name || 'Propiedad ' + (index + 1)}</h3>
                            <p><strong>Precio:</strong> ${property.price || 'N/A'}</p>
                            <p><strong>Ubicaci√≥n:</strong> ${property.ubi || 'N/A'}</p>
                            <p><strong>Descripci√≥n:</strong> ${property.description || 'N/A'}</p>
                        `;
                        container.appendChild(propertyCard);
                    });
                    
                    return; // √âxito, salir de la funci√≥n
                } catch (error) {
                    console.warn(`‚ö†Ô∏è URL ${i + 1} fall√≥:`, error.message);
                }
            }
            
            // Si llegamos aqu√≠, todas las URLs fallaron
            console.error('‚ùå Todas las URLs fallaron');
            document.getElementById('properties-container').innerHTML = `
                <div class="error">
                    ‚ùå Error de conexi√≥n. No se pudo cargar los datos.<br>
                    <small>Por favor, verifica tu conexi√≥n a internet y recarga la p√°gina</small>
                </div>
            `;
        }

        // Ejecutar cuando se carga la p√°gina
        document.addEventListener('DOMContentLoaded', function() {
            console.log('üéØ DOMContentLoaded ejecutado en test-casas-simple.html');
            loadProperties();
        });
    </script>
</body>
</html>
